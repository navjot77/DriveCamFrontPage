<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>getBlog</title>
</head>
<body>




        <h1>{{ blog.subject }}</h1>
        <p>By{{ blog.owner }}</p>

    <blockquote style="margin-left: 0.5em">{{ blog.blog }}</blockquote>

        <input type="hidden" name="post_id" value="{{ blog.key().id() }}" />

    <form method="post" action="/blog/getBlog">
     <input type="hidden" name="post_id" value="{{ blog.key().id() }}" />

    {% for like in like %}
        {% if like.c_post_id == blog.key().id() %}
<!--If user entered new blog, then a new page will be rendered to view what
will be getting posted, so in that case as this is only view page, we hide
 like, comment and edit  buttons  else if user clicks them : error will be
 generated-->
            {% if newblog %}
                <input type="hidden">
            {% else %}
                <button name="like_button_id" value="{{like.key().id()}}"
                        style="margin-left: 1em">LIKE {{ like.c_likes }}</button>
            {% endif %}
            {% if like_error_id == like.key().id() %}
                <p style="color:red; margin:1em">{{ like_error }}</p>
            {% endif %}
        {% endif %}
    {% endfor %}
    {% set check_comments = [] %}
 <!-- This check is to see wether main.py sends error message and error id
 if so, then we only have to display to corresponding blog not all so
 we will be seeing comment_error_id which will be blog id for which
 error is generated-->
    {% if comment_error_id == blog.key().id() %}
        <p style="color:red; margin:1em">{{ comment_error }}
        </p>
    {% endif %}

       </form>





    {% for each_comment in each_comment %}

        {% if each_comment.per_comment_id == blog.key().id() %}

            {% if check_comments.append(1) %}
            {% endif %}
            <blockquote style="margin-left: 2em">{{ each_comment.comment }}
            <p style="text-align: right;margin-right: 4em">by
                <em>{{ each_comment.owner_comment }}</em></p>

<form method="post" style="margin-left: 10em; margin-top:0.1em" action="/blog/getBlog">
    <input type="hidden" name="post_id" value="{{ blog.key().id() }}" />
    <button name="each_comment_id_for_edit" value="{{ each_comment.key().id()}}" style="margin-left: 0.7em" class="glyphicon glyphicon-edit">Edit </button>
    <button name="each_comment_id_for_delete" value="{{ each_comment.key().id()}}" style="margin-left: 0.7em" class="glyphicon glyphicon-trash" >Delete </button>
</form >
            </blockquote>
             {% if comment_delete_id == each_comment.key().id() %}
                    <p style="color:red; margin:1em">
                        {{ comment_delete_error }}
                     </p>
                    {% endif %}

             {% if comment_edit_id == each_comment.key().id() %}
                    <p style="color:red; margin:1em">
                        {{ comment_edit_error }}
                     </p>
                    {% endif %}
        {% endif %}
        {% endfor  %}

    {% if check_comments |count == 0 %}
    <blockquote style="margin-left:2em">
        No Comments Yet, click Comment to add
    </blockquote>
    {% endif %}
    <form method="post" action="/blog/edit">
    <button name="post_id"
            value="{{ blog.key().id()}}" style="margin-left: 0.7em">
        EDIT BLOG
    </button>
    </form >

     {% if newblog %}
         <input type="hidden">

     {% else %}

<!--If user entered new blog, then a new page will be rendered to view what
will be getting posted, so in that case as this is only view page, we hide
 like, comment and edit  buttons  else if user clicks them : error will be
 generated-->
 <form method="post" action="/blog/getBlog">

        <button name="comment_post_id" value="{{ blog.key().id()}}"
                style="margin-top: 1em; margin-left: 0.7em" >Comment Blog</button>

    </form>

    <form method="post" action="/blog/getBlog">
     <button name="delete_post_id" value="{{ blog.key().id()}}"
             style="margin-top: 1em; margin-left: 0.7em" >Delete Blog</button>
    </form>

    {% if delete_error_id == blog.key().id() %}
        <p style="color:red; margin:1em">{{ delete_error }}
        </p>
    {% endif %}
    {% endif %}

    {% if newblog %}
        <a href="/blog">
            <p class="btn btn-primary"
               style="margin-top: 4em; margin-left: 1em">
                MAIN PAGE
            </p>
        </a>
    {% endif %}


    <hr>













</body>
</html>